# Бенчмарки

## Сравниваем 2 модели:
- YandexGPT 5 8b(8млрд параметров) - Yandex - https://habr.com/ru/companies/yandex/articles/895428/
- Gemma 3 12b(12млрд параметров) - Google - https://www.hardreset.info/ru/articles/gemma-3-power-ai-surpasses-everything/
- Deepseek R1 8b(8млрд параметров) - Deepseek - https://ollama.com/library/deepseek-r1:8b
- Yandex GPT 5 Pro Online - Yandex - https://alice.yandex.ru/
- Deepseek Online - https://deepseek.com/

### YandexGPT 5 Lite:
```
ollama run yandex/YandexGPT-5-Lite-8B-instruct-GGUF --verbose
ollama stop yandex/YandexGPT-5-Lite-8B-instruct-GGUF
````
### gemma3:
```
ollama run gemma3:12b --verbose
ollama stop gemma3:12b
```
### ollama run deepseek-r1:8b:
```
ollama run deepseek-r1:8b --verbose
ollama stop deepseek-r1:8b
```

# Формат теста
Будем задавать 5 вопроса:
1. Сгенерируй пожалуйста формулу для рассчета показателя time to market.
1. Напиши тест-план для (какого-нибудь куска требований) шуги
1. Представь что ты senior разработчик php. Напиши код на php для решения задачи
1. Расскажи что ты видишь на картинке (шуфутинский в белом костюме) и картинка ollama
1. Описание инцидента. Спросить в чем может быть дело и по какому алгоритму правлиьно этот инцидент разобрать.

# PROMPTS
<hr>

# Prompt 1:
````
Сгенерируй пожалуйста формулу для рассчета показателя time to market.
````

## Ответ deepseek-r1-8b:
> Думает
> 
Хорошо, мне нужно разобраться с понятием "time to market" и попытаться сформулировать уравнение для его расчета. Time to market, в переводе с английского, означает время, которое проходит от начала разработки до выхода产品 на рынок. Это важный показатель, особенно        
для компаний, занимающихся разработкой программного обеспечения или других продуктов.

Первым делом, я думаю, что time to market зависит от нескольких факторов:

1. **Текнологический аспект**: Время, которое требуется для разработки и тестирования продукта. Это может включать как опыт разработчика, так и сложность самой технологии.
2. **Процесс управления проекта**: Ответственность за сроки, управление ресурсами и возможные задержки из-за проблем в команде или внешних факторов.
3. **Маркетting**: Время, которое требуется для продвижения продукта после его разработки. Это включает планирование кампаний, создание рекламы и т.д.
4. **Сопротивление рынка**: Возможно, влияние конкуренции или других факторов, которые могут замедлить выход产品 на рынок.

Потом я задумался о том, как эти факторы взаимодействуют друг с другом и могут быть включены в уравнение. Может быть, это нелинейная функция от суммы отдельных временных показателей.

Далее, я подумывал о том, чтобы использовать линейную модель, так как she sometimes thinks что время depends на нескольких переменных, которые можно сложить или умножить, но, возможно, сложение будет более логичным, так как увеличение каждого из них может продлевать      
время.

Теперь мне нужно определиться с переменными:

- Let \( T \) – общее время до выхода на рынок.
- Let \( D \) – время разработки (Дuration of Development).
- Let \( T_{test} \) – время тестирования.
- Let \( M \) – время маркетинга и продвижения.
- Let \( R \) – влияние конкуренции или других факторов, которые замедляют процесс.

Тогда можно попробовать выразить time to market как сумму этих временных показателей:

\( T = D + T_{test} + M + R \)

Но я не уверен, правильно ли я это делаю. Может быть, некоторые из这些 компонентов связаны более сложно, и их стоит умножить или взять экспонент.

Используя经验ные данные, можно попробовать найти коэффициенты для каждого из этих факторов. Например:

- Время разработки: \( D = a \times t_1 \)
- Время тестирования: \( T_{test} = b \times t_2 \)
- Время маркетинга: \( M = c \times t_3 \)
- Влияние конкуренции: \( R = d \times t_4 \)

где \( a, b, c, d \) – коэффициенты, зависящие от конкретной ситуации, и \( t_1, t_2, t_3, t_4 \) – соответствующие временные показатели.

Тогда общее время до выхода на рынок можно записать как:

\( T = a \times t_1 + b \times t_2 + c \times t_3 + d \times t_4 \)

Это кажется более детализированным подходом, но возможно, для конкретного расчета требуется больше информации о каждом факторе и их взаимодействии.

Может быть, я упустил какие-то важные составляющие. Например, взаимодействие между отделами разработки и маркетинга может также влиять на время выхода на рынок. Также не考虑ал возможные задержки из-за изменения требования или приоритетов.

Возможно, нужно использовать более сложные модели, такие как предсказательное моделирование или учет зависимости каждого компонента от других факторов. Но для начала, можно остановиться на линейной модели, чтобы создать базовый формул.

В итоге, я думаю, что формула time to market может быть представлена в виде суммы отдельных временных показателей с учетом их коэффициентов.
> Ответ

Time to Market (TTM) — это время, которое проходит от начала разработки до выхода продукта на рынок. Для расчета TTM можно использовать следующие ключевые переменные:

- \( D \) – время разработки
- \( T_{test} \) – время тестирования
- \( M \) –时间 маркетинга и продвижения
- \( R \) –влияние факторов, замедляющих процесс (например, конкуренция)

Формула для расчета Time to Market может быть представлена следующим образом:

\[ T = D + T_{test} + M + R \]

где:
- \( D = a \times t_1 \) – время разработки, зависящее от коэффициента \( a \) и временного показателя \( t_1 \)
- \( T_{test} = b \times t_2 \) – время тестирования, зависящее от коэффициента \( b \) и временного показателя \( t_2 \)
- \( M = c \times t_3 \) – время маркетинга, зависящее от коэффициента \( c \) и временного показателя \( t_3 \)
- \( R = d \times t_4 \) – влияние факторов замедления, зависящее от коэффициента \( d \) и временного показателя \( t_4 \)

Эта модель предполагает, что каждая составляющая времени может быть оценена отдельно и суммирована для получения общего времени до выхода на рынок. Однако, в реальной практике может быть необходимо учитывать взаимодействие между этими факторами и использовать более       
сложные методы анализа, такие как предсказательное моделирование или учет задержек.

> total duration:       50.5509802s
load duration:        24.7321ms
prompt eval count:    24 token(s)
prompt eval duration: 130.5747ms
prompt eval rate:     183.80 tokens/s
eval count:           1376 token(s)
eval duration:        50.3938783s
eval rate:            27.30 tokens/s


## Ответ yandex-gpt-5lite-8b:
Для расчёта показателя Time to Market (время вывода продукта на рынок) можно использовать следующую формулу:

$Time \, to \, Market = T_{разработка} + T_{производство} + T_{логистика}$,

где:
* $T_{разработка}$ — время, необходимое для разработки продукта;
* $T_{производство}$ — время производства и подготовки к выпуску на рынок;
* $T_{логистика}$ — время доставки готового продукта до конечного потребителя.

В зависимости от контекста и специфики проекта могут потребоваться дополнительные параметры, например:
* $T_{маркетинг}$ — время на маркетинговую подготовку и запуск рекламных кампаний;
* $T_{сертификация}$ — время, необходимое для получения всех необходимых сертификатов и разрешений.

Таким образом, полная формула может выглядеть так:

$Time \, to \, Market = T_{разработка} + T_{производство} + T_{логистика} + T_{маркетинг} + T_{сертификация}$.

> total duration:       31.1659333s
load duration:        21.0347ms
prompt eval count:    26 token(s)
prompt eval duration: 1.6298136s
prompt eval rate:     15.95 tokens/s
eval count:           206 token(s)
eval duration:        29.5063839s
eval rate:            6.98 tokens/s


## Ответ gemma3:
Формула расчета показателя Time to Market (TTM) может быть представлена в разных вариантах, в зависимости от того, что вы хотите измерить и какие данные доступны. Вот несколько распространенных подходов:

**1. Самый простой подход: от идеи до релиза продукта**

*   **TTM = Дата релиза продукта - Дата утверждения идеи/концепции**

    *   **Дата релиза продукта:** Дата, когда продукт официально доступен для продажи или использования.
    *   **Дата утверждения идеи/концепции:** Дата, когда идея продукта была одобрена для дальнейшей разработки.

**2. Более детальный подход: Разделение на этапы**

Этот подход разбивает процесс на этапы и считает время для каждого этапа:

*   **TTM = Время на этапе 1 + Время на этапе 2 + ... + Время на этапе N**

    *   Где этапы могут быть:
        *   **Исследование рынка (Market Research):**  Время, затраченное на анализ рынка, определение потребностей клиентов и конкурентов.
        *   **Проектирование (Design):** Время, затраченное на создание дизайна продукта, архитектуры и функциональности.
        *   **Разработка (Development):** Время, затраченное на кодирование и создание самого продукта.
        *   **Тестирование (Testing):** Время, затраченное на тестирование продукта и исправление ошибок.
        *   **Подготовка к релизу (Release Preparation):**  Время, затраченное на подготовку маркетинговых материалов, документации и инфраструктуры для запуска продукта.
        *   **Релиз (Release):** Дата релиза минус дата начала разработки.

**3.  Определение TTM в контексте конкуренции**

Иногда важно сравнить свой TTM с TTM конкурентов.  В этом случае:

*   **TTM = Дата релиза продукта - Дата релиза аналогичного продукта конкурентом**  (если есть возможность узнать дату релиза продукта конкурентом)

**4.  Учет этапов жизненного цикла продукта (для итеративных релизов):**

Если вы выпускаете продукт по принципу Agile или DevOps с частыми обновлениями, можно считать TTM для каждой итерации:

*   **TTM (итерация) = Дата релиза итерации - Дата начала работы над итерацией**

**Важные моменты и факторы, которые нужно учитывать:**

*   **Определение "начала" и "конца":**  Четко определите, когда начинается и заканчивается каждый этап. Размытые границы могут привести к неточным результатам.
*   **Включите все необходимые этапы:**  Не забудьте учесть все этапы, которые составляют процесс вывода продукта на рынок.
*   **Согласованность данных:**  Убедитесь, что используемые даты согласованы и точны.
*   **Контекст:**  TTM  зависит от отрасли, сложности продукта и размера компании.  Сравнивайте TTM только с аналогичными компаниями и продуктами.
*   **Учитывайте влияние факторов:**  На TTM могут влиять различные факторы, такие как нехватка ресурсов, изменения в требованиях или проблемы с поставщиками.

**Пример:**

Предположим, компания разработала новое мобильное приложение:

*   Дата утверждения идеи: 2023-01-15
*   Дата релиза: 2023-07-15

TTM = 2023-07-15 - 2023-01-15 = 182 дня (примерно 6 месяцев)

**В заключение:**

Не существует универсальной формулы для расчета TTM. Выберите подход, который наилучшим образом отражает ваши процессы и цели.  Важно не только измерить TTM, но и анализировать его, чтобы выявить области для улучшения и ускорить вывод новых продуктов на рынок.


> total duration:       3m41.8775405s
load duration:        64.0003ms
prompt eval count:    26 token(s)
prompt eval duration: 2.4079217s
prompt eval rate:     10.80 tokens/s
eval count:           873 token(s)
eval duration:        3m39.4050373s
eval rate:            3.98 tokens/s

## Ответ Yandex GPT 5 Pro Online:
Время выхода на рынок (Time to Market, TTM) — это период с начала разработки продукта до его запуска и доступности для потребителей. Формула для расчёта TTM может быть следующей:

$TTM = D_к - D_н$,

где:
* $TTM$ — время выхода на рынок;
* $D_к$ — дата завершения разработки и запуска продукта на рынок;
* $D_н$ — дата начала разработки продукта.

Эта формула позволяет вычислить общее количество дней, месяцев или лет, затраченных на разработку и вывод продукта на рынок. В зависимости от специфики проекта и доступных данных, формулу можно адаптировать, добавляя дополнительные параметры, например, время на тестирование, сертификацию или подготовку производственных мощностей.

> ~10 секунд


## Ответ Deepseek Online:
Формула для расчета Time to Market (TTM):

Time to Market (TTM) = Дата выхода на рынок – Дата начала разработки

Компоненты формулы:
Дата начала разработки – момент, когда проект/продукт официально стартовал (например, утверждение ТЗ, выделение финансирования или начало проектирования).

Дата выхода на рынок – момент, когда продукт стал доступен для первых клиентов (официальный релиз, запуск продаж или пилотное внедрение).

Дополнительные варианты расчета:
Для Agile/итеративных разработок:
TTM = ∑(Длительность каждой итерации) + Время на тестирование и вывод на рынок.

С учетом задержек:
TTM = (Дата выхода на рынок – Дата начала разработки) – ∑(Дни задержек из-за внешних факторов).

Усредненный TTM для компании:
Средний TTM = (∑TTM всех продуктов за период) / (Количество продуктов).

Пример:
Если разработка началась 1 января 2024, а продукт вышел 1 июля 2024, то:
TTM = 01.07.2024 – 01.01.2024 = 182 дня.

Если нужна более сложная формула с учетом специфики вашего проекта, уточните детали!

> ~15 секунд




<hr>

# Prompt 2:
````
"""
Напиши тест-план для задачи ниже:
Цели реализации
С точки зрения пользователя:

Невозможность изменить "Сегмент" и "Подсегмент", без наличия роли "Бизнес-администратор".
С точки зрения бизнеса:

Исключение ошибок при некорректном закреплении клиентов за сегментом. 
Бизнес ограничения/правила
Доработка должна быть выполнена вместе с 1270 - Реализовать автозаполнение полей сегмент и подсегмент при создании (ПК и КК) DEVELOPMENT .
Связанные задачи 1092 - Автоматическое заполнение поля "Стратегический клиент" в карточке клиента TESTING DONE и 1093 - Дать возможность Бизнес-администраторам корректировать поле стратегический клиент TESTING DONE (1092 | 1093 Автоматическое заполнение поля "Cтратегический клиент") затрагивают общий функционал.
USER STORY
Как ответственный сотрудник за модель продаж
я хочу закрыть возможность всем пользователям системы редактировать или заполнять поля: "Сегмент" и "Подсегмент по выручке", а бизнес-администраторам оставить
чтобы исключить ошибки при некорректное закрепление клиентов за сегментом.

СИСТЕМНЫЕ ТРЕБОВАНИЯ
Функциональные требования
Поле "Сегмент" не может быть изменено пользователями, за исключением следующих событий:
1) Заявка на изменение.
2) Изменение сотрудником с ролью "Бизнес-администратор".
3) Изменение через загрузку файла.
Поле "Подсегмент по выручке" не может быть изменено пользователями, за исключением следующих событий:
1) Изменение сотрудником с ролью "Бизнес-администратор".
2) Изменение через загрузку файла.
Нефункциональные требования
Доработка не должна влиять на производительность системы.
"""
````

## Ответ deepseek-r1-8b:
> Думает
<think>
Итак, я получил задачу написать тест-план для конкретной задачи. Начну с того, что внимательно прочитаю предоставленные материалы.

Цели реализации:

1. С точки зрения пользователя: невозможность изменить "Сегмент" и "Подсегмент", кроме бизнес-администраторов.
2. С точки зрения бизнеса: исключение ошибок при некорректном закреплении клиентов за сегментом.

Ограничения/правила:

- Доработка должна быть выполнена вместе с задачами 1270 (автозаполнение полей сегмент и подсегмент при создании) и 1092, 1093 (заполнение "Стратегический клиент").

Звязанные задачи:

- 1092: Автоматическое заполнение "Стратегический клиент" в карточке клиента.
- 1093: Возможность бизнес-администраторам корректировать поле стратегический клиент.

USER STORY:

Как ответственный сотрудник за модель продаж я хочу:
- Закрыть возможность всем пользователям редактировать или заполнять поля "Сегмент" и "Подсегмент по выручке", чтобы исключить ошибки при некорректном закреплении клиентов за сегментом.
- Остановить возможность редактирования этими полями, кроме бизнес-администраторов и случаев через загрузку файла.

Системные требования:

Функциональные:
- Поле "Сегмент" может быть изменено только в следующих случаях:
    - Заявка на изменение.
    - Изменение сотрудником с ролью "Бизнес-администратор".
    - Через загрузку файла.
- Поле "Подсегмент по выручке" может быть изменено только в следующих случаях:
    - Изменение сотрудником с ролью "Бизнес-администратор".
    - Через загрузку файла.

Нефункциональные:
- Доработка не должна замедлить систему.

Теперь, чтобы написать тест-план, мне нужно структурировать эти требования и убедиться, что все случаи覆ыты. Также необходимо определить, какие функции будут проверены на каждом этапе тестирования.

Возможно, я пропущу некоторые детали, поэтому важно внимательно проанализировать каждое требование и убедиться, что тест-план охватит все возможные сценарии.
> Ответ

### Тест-план для задачи: Изменение доступа к полям "Сегмент" и "Подсегмент по выручке"

#### 1. Цель тестирования
Проверить, что поля "Сегмент" и "Подсегмент по выручке" могут быть изменены только сотрудниками с ролью "Бизнес-администратор" или через загрузку файла, а всеми другими пользователем такие изменения недоступны.

#### 2. Примеры сценариев тестирования

**2.1. Сценарий 1: Пользователь без прав редактирования попытается изменить поле "Сегмент".**
- **Ожидаемый результат:** Поле не изменится.
- **Степень сложности:** Очень низкая.

**2.2. Сценарий 2: Пользователь без прав редактирования попытается изменить поле "Подсегмент по выручке".**
- **Ожидаемый результат:** Поле не изменится.
- **Степень сложности:** Очень низкая.

**2.3. Сценарий 3: Пользователь с ролью "Бизнес-администратор" попытается изменить поле "Сегмент".**
- **Ожидаемый результат:** Поле изменится.
- **Степень сложности:** Низкая.

**2.4. Сценарий 4: Пользователь с ролью "Бизнес-администратор" попытается изменить поле "Подсегмент по выручке".**
- **Ожидаемый результат:** Поле изменится.
- **Степень сложности:** Низкая.

**2.5. Сценарий 5: Пользователь без прав редактирования попытается изменить поле через загрузку файла.**
- **Ожидаемый результат:** Поле не изменится.
- **Степень сложности:** Низкая.

**2.6. Сценарий 6: Пользователь с ролью "Бизнес-администратор" попытается изменить поле через загрузку файла.**
- **Ожидаемый результат:** Поле изменится.
- **Степень сложности:** Низкая.

**2.7. Сценарий 7: Проверка функционала заявки на изменение.**
- **Ожидаемый результат:** Поле "Сегмент" можно изменить через заявку.
- **Степень сложности:** Низкая.

**2.8. Сценарий 8: Проверка функционала изменения сотрудником с ролью "Бизнес-администратор".**
- **Ожидаемый результат:** Поле "Сегмент" и "Подсегмент по выручке" изменятся.
- **Степень сложности:** Низкая.

**2.9. Сценарий 9: Проверка функционала загрузки файла для изменения полей.**
- **Ожидаемый результат:** Поле "Сегмент" и "Подсегмент по выручке" изменятся.
- **Степень сложности:** Низкая.

**2.10. Сценарий 10: Проверка предотвращения изменения полей неоправомочными пользователем.**
- **Ожидаемый результат:** Поле не изменится.
- **Степень сложности:** Очень низкая.

#### 3. Критерии приема тестов
Тест считается пройденным, если:
- Все сценарии были проверены и работают как ожидалось.
- Не возникли непредвиденные ошибки.
- Проверено, что система не позволяет изменять поля "Сегмент" и "Подсегмент по выручке" пользователям без соответствующих прав.

#### 4. Вывод
После выполнения тестирования подтвердится возможность изменения полей только для бизнес-администраторов или через загрузку файла, что исключит риски некорректного закрепления клиентов за сегментом.

> total duration:       1m1.0627693s
load duration:        24.1847ms
prompt eval count:    492 token(s)
prompt eval duration: 356.479ms
prompt eval rate:     1380.17 tokens/s
eval count:           1494 token(s)
eval duration:        1m0.6809909s
eval rate:            24.62 tokens/s


## Ответ yandex-gpt-5lite-8b:
### Тест-план для задачи «Ограничение редактирования полей „Сегмент“ и „Подсегмент по выручке“»

**Цель:** проверить, что пользователи без роли «Бизнес-администратор» не могут изменить поля «Сегмент» и «Подсегмент по выручке», а бизнес-администраторы имеют такую возможность.

#### Сценарии тестирования:

1. **Проверка возможности изменения поля «Сегмент»:**
    * **Сценарий 1:** пользователь без роли «Бизнес-администратор» пытается изменить поле «Сегмент».
        * **Ожидаемый результат:** изменение не допускается, система выдаёт соответствующее сообщение об ошибке.
    * **Сценарий 2:** сотрудник с ролью «Бизнес-администратор» изменяет поле «Сегмент».
        * **Ожидаемый результат:** изменение разрешено.
    * **Сценарий 3:** пользователь пытается изменить поле «Сегмент» через загрузку файла.
        * **Ожидаемый результат:** изменение разрешено.

2. **Проверка возможности изменения поля «Подсегмент по выручке»:**
    * **Сценарий 1:** пользователь без роли «Бизнес-администратор» пытается изменить поле «Подсегмент по выручке».
        * **Ожидаемый результат:** изменение не допускается, система выдаёт соответствующее сообщение об ошибке.
    * **Сценарий 2:** сотрудник с ролью «Бизнес-администратор» изменяет поле «Подсегмент по выручке».
        * **Ожидаемый результат:** изменение разрешено.

#### Тестовые данные:

* Для каждого сценария необходимо создать тестовые учётные записи пользователей с разными ролями (обычный пользователь и бизнес-администратор).
* Использовать тестовые данные для проверки возможности изменения полей.

#### Инструменты тестирования:

* Система управления тестированием (например, Jira, TestRail).
* Интерфейс системы для работы с полями «Сегмент» и «Подсегмент по выручке».

#### Критерии успешного прохождения теста:

* Все сценарии успешно выполнены, ожидаемые результаты совпадают с фактическими.
* Ошибок при изменении полей не обнаружено.

#### Дополнительные проверки:

* Проверить, что система не выдаёт ошибок производительности при выполнении сценариев тестирования.
* Убедиться, что изменения в полях «Сегмент» и «Подсегмент по выручке» отображаются корректно.

> total duration:       1m11.2139472s
load duration:        20.9634ms
prompt eval count:    369 token(s)
prompt eval duration: 1.1293662s
prompt eval rate:     326.73 tokens/s
eval count:           476 token(s)
eval duration:        1m10.0630768s
eval rate:            6.79 tokens/s

## Ответ gemma3:
Тест-план для задачи ограничения редактирования полей "Сегмент" и "Подсегмент"

**1. Введение**

Этот документ описывает план тестирования функциональности ограничения редактирования полей "Сегмент" и "Подсегмент" в системе. Цель тестирования - проверить соответствие функциональности требованиям, заявленным в User Story и системных требованиях, а также
убедиться в отсутствии негативного влияния на производительность системы.

**2. Область тестирования**

*   Редактирование полей "Сегмент" и "Подсегмент" в карточке клиента.
*   Поведение системы для разных ролей пользователей (обычный пользователь, Бизнес-администратор).
*   Функциональность загрузки данных (если используется).
*   Влияние на производительность системы.
*   Взаимодействие с задачами 1092 и 1093.

**3. Не область тестирования**

*   Автоматическое заполнение полей "Сегмент" и "Подсегмент" (требуется взаимодействие с задачей 1270).  Тестирование взаимодействия будет ограничено проверкой, что ограничения работают корректно после автоматического заполнения.
*   Заявка на изменение сегмента (требует отдельного тестирования процесса заявки).
*   Загрузка данных - проверка корректности данных, загружаемых из файла, не входит в эту область.  Проверяется только возможность загрузки и применение изменений.

**4. Роли и ответственности**

| Роль                | Ответственность                                    |
| ------------------- | -------------------------------------------------- |
| Тестировщик         | Разработка и выполнение тестовых сценариев, документирование результатов. |
| Разработчик         | Устранение обнаруженных дефектов.               |
| Бизнес-аналитик    | Предоставление разъяснений по функциональности и требованиям. |

**5. Тестовая среда**

*   Окружение разработки/тестирования, соответствующее Production (или максимально близкое к нему).
*   Доступ к тестовым данным с разными ролями пользователей.
*   Инструменты для измерения производительности (например, мониторинг запросов к базе данных).

**6. Тестовые сценарии**

Следующие тестовые сценарии будут выполнены:

| ID    | Описание тестового сценария                                                                    | Ожидаемый результат                                                                                                |  Приоритет |
| ----- | ---------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------- | ---------- |
| TC-001 |  Попытка изменения "Сегмента" обычным пользователем через интерфейс карточки клиента.  |  Поле должно быть недоступно для редактирования.  Попытка изменить должна приводить к ошибке/блокировке. | High       |
| TC-002 |  Попытка изменения "Подсегмента по выручке" обычным пользователем через интерфейс карточки клиента. |  Поле должно быть недоступно для редактирования. Попытка изменить должна приводить к ошибке/блокировке.  | High       |
| TC-003 |  Изменение "Сегмента" Бизнес-администратором через интерфейс карточки клиента.       |  Изменение должно быть возможно и успешно сохранено.                                                             | High       |
| TC-004 |  Изменение "Подсегмента по выручке" Бизнес-администратором через интерфейс карточки клиента. |  Изменение должно быть возможно и успешно сохранено.                                                             | High       |
| TC-005 |  Автоматическое заполнение поля "Сегмент" (Задание 1270) и последующая попытка редактирования обычным пользователем. | Пользователь не должен иметь возможности изменить автоматически заполненное значение. | Medium     |
| TC-006 |  Автоматическое заполнение поля "Подсегмент" (Задание 1270) и последующая попытка редактирования обычным пользователем. | Пользователь не должен иметь возможности изменить автоматически заполненное значение. | Medium     |
| TC-007 |  Проверка загрузки данных, содержащих изменения "Сегмента" и "Подсегмента".           |  Изменения должны быть успешно применены, а пользователь, загружающий данные, должен иметь соответствующие права.      | Medium     |
| TC-008 |  Тестирование производительности: время загрузки карточки клиента с большим количеством данных. |  Время загрузки карточки клиента не должно превышать установленный порог (например, 2 секунды). | Low        |
| TC-009 |  Тестирование различных ролей пользователей (помимо обычного пользователя и бизнес-администратора) | Проверка ограничений редактирования для каждой роли.  | Low     |

**7. Критерии входа/выхода**

*   **Критерии входа:**
    *   Код реализован и развернут в тестовой среде.
    *   Документация по реализации доступна.
    *   Задание 1270 (автозаполнение) реализовано (для целей ограниченного тестирования взаимодействия).
*   **Критерии выхода:**
    *   Все тестовые сценарии выполнены.
    *   Все найденные дефекты исправлены и протестированы.
    *   Результаты тестирования задокументированы и утверждены заинтересованными сторонами.

**8. Инструменты**

*   Система отслеживания ошибок (например, Jira).
*   Инструменты для проведения производительного тестирования (например, JMeter, нагрузочные тесты).
*   Инструменты для документирования результатов тестирования.

**9. Оценка рисков**

| Риск                               | Вероятность | Влияние |  План смягчения                                     |
| ---------------------------------- | ---------- | -------- | ---------------------------------------------------- |
| Некорректная реализация ограничений   | Medium     | High     |  Тщательное выполнение тестовых сценариев, ревью кода. |
| Проблемы с интеграцией с задачей 1270 | Medium     | Medium   |  Раннее взаимодействие с командой, отвечающей за 1270. |
| Негативное влияние на производительность | Low        | Medium   |  Проведение производительного тестирования.           |



**10. Утверждение**

____________________________
(Подпись тестировщика)

____________________________
(Подпись бизнес-аналитика)

____________________________
(Подпись разработчика)


> total duration:       5m54.0160347s
load duration:        60.6892ms
prompt eval count:    440 token(s)
prompt eval duration: 2.107805s
prompt eval rate:     208.75 tokens/s
eval count:           1476 token(s)
eval duration:        5m51.847014s
eval rate:            4.20 tokens/s

# Ответ Yandex GPT 5 Online:
**Тест-план для проверки функционала ограничения редактирования полей «Сегмент» и «Подсегмент по выручке»**

**Цель тестирования:** убедиться, что пользователи без роли «Бизнес-администратор» не могут редактировать поля «Сегмент» и «Подсегмент по выручке», а бизнес-администраторы имеют такую возможность.

**Тестовые сценарии:**

1. **Проверка доступности редактирования полей для пользователей без роли «Бизнес-администратор»:**
    - Шаг 1: войти в систему под учётной записью пользователя без роли «Бизнес-администратор».
    - Шаг 2: попытаться отредактировать поле «Сегмент» в карточке клиента.
    - Шаг 3: попытаться отредактировать поле «Подсегмент по выручке» в карточке клиента.
    - Ожидаемый результат: редактирование полей недоступно для пользователя без соответствующей роли.

2. **Проверка доступности редактирования полей для бизнес-администратора:**
    - Шаг 1: войти в систему под учётной записью бизнес-администратора.
    - Шаг 2: попытаться отредактировать поле «Сегмент» в карточке клиента.
    - Шаг 3: попытаться отредактировать поле «Подсегмент по выручке» в карточке клиента.
    - Ожидаемый результат: бизнес-администратор может редактировать оба поля.

3. **Проверка возможности изменения полей через загрузку файла:**
    - Шаг 1: подготовить файл с данными для загрузки, содержащими изменения полей «Сегмент» и «Подсегмент по выручке».
    - Шаг 2: загрузить файл под учётной записью пользователя без роли «Бизнес-администратор».
    - Шаг 3: проверить, произошли ли изменения в полях.
    - Шаг 4: повторить загрузку файла под учётной записью бизнес-администратора.
    - Ожидаемый результат: изменения полей через загрузку файла возможны для обоих типов пользователей.

4. **Проверка работы системы при попытке некорректного изменения полей:**
    - Шаг 1: попытаться изменить поле «Сегмент» или «Подсегмент по выручке» без наличия необходимых прав.
    - Ожидаемый результат: система блокирует попытку изменения полей и выводит соответствующее сообщение об ошибке.

5. **Проверка влияния доработки на производительность системы:**
    - Шаг 1: измерить время загрузки страниц и выполнения операций до внедрения доработки.
    - Шаг 2: после внедрения доработки повторно измерить время загрузки страниц и выполнения операций.
    - Ожидаемый результат: время загрузки страниц и выполнения операций не изменилось или изменилось незначительно.

**Критерии успешного прохождения тестов:**
- Пользователи без роли «Бизнес-администратор» не могут редактировать поля «Сегмент» и «Подсегмент по выручке».
- Бизнес-администраторы могут редактировать оба поля.
- Изменение полей через загрузку файла возможно для всех пользователей.
- Система блокирует попытки некорректного изменения полей.
- Доработка не повлияла на производительность системы.
> 25 sec

# Ответ Deepseek Online:
### **Тест-план для задачи: Ограничение редактирования полей "Сегмент" и "Подсегмент"**

#### **1. Введение**
**Цель тестирования:**  
Проверить, что поля "Сегмент" и "Подсегмент по выручке" недоступны для редактирования обычными пользователями, но могут быть изменены:
- Бизнес-администраторами,
- Через загрузку файла,
- Через заявку на изменение (только для "Сегмента").

**Область тестирования:**
- Проверка прав доступа к полям.
- Проверка корректности автозаполнения (связано с задачей 1270).
- Проверка изменений через загрузку файла.
- Проверка заявки на изменение (для "Сегмента").

#### **2. Подход к тестированию**
- **Ручное тестирование** (основной метод).
- **Автоматизированное тестирование** (если есть готовые тесты для проверки ролей).
- **Регрессионное тестирование** (проверка связанных задач 1092, 1093, 1270).

#### **3. Тестовые сценарии**

| **№** | **Сценарий** | **Роль** | **Ожидаемый результат** | **Статус** |
|-------|-------------|----------|--------------------------|------------|
| **1. Проверка недоступности редактирования для обычных пользователей** | | | | |
| 1.1 | Попытка изменить "Сегмент" в карточке клиента | Обычный пользователь | Поле недоступно для редактирования | |
| 1.2 | Попытка изменить "Подсегмент по выручке" | Обычный пользователь | Поле недоступно для редактирования | |
| **2. Проверка доступности редактирования для Бизнес-администратора** | | | | |
| 2.1 | Изменение "Сегмента" | Бизнес-администратор | Поле можно изменить | |
| 2.2 | Изменение "Подсегмента по выручке" | Бизнес-администратор | Поле можно изменить | |
| **3. Проверка изменения через загрузку файла** | | | | |
| 3.1 | Загрузка файла с новым "Сегментом" | Любой пользователь с правами загрузки | Поле обновляется | |
| 3.2 | Загрузка файла с новым "Подсегментом" | Любой пользователь с правами загрузки | Поле обновляется | |
| **4. Проверка заявки на изменение "Сегмента"** | | | | |
| 4.1 | Создание заявки на изменение "Сегмента" | Обычный пользователь | Заявка создается, поле меняется после согласования | |
| **5. Проверка автозаполнения (связано с задачей 1270)** | | | | |
| 5.1 | Создание клиента (ПК/КК) | Любой пользователь | Поля "Сегмент" и "Подсегмент" заполняются автоматически | |
| **6. Проверка нефункциональных требований** | | | | |
| 6.1 | Проверка производительности при массовой загрузке | - | Нет значительного замедления | |

#### **4. Критерии приемки**
✅ Все поля корректно ограничены для редактирования.  
✅ Бизнес-администраторы могут изменять поля.  
✅ Изменения через файл и заявки работают корректно.  
✅ Автозаполнение работает (если задача 1270 готова).  
✅ Нет деградации производительности.

#### **5. Окружение**
- **Тестовое окружение:** [Указать среду]
- **Роли:** Обычный пользователь, Бизнес-администратор.
- **Данные:** Тестовые клиенты с разными сегментами.

#### **6. Риски**
- Задача 1270 не готова → автозаполнение нельзя проверить.
- Зависимость от прав доступа к загрузке файлов.

#### **7. Отчетность**
- Баг-репорты в [Jira/другой системе].
- Итоговый отчет о тестировании.

**Тестировщик:** [ФИО]  
**Дата:** [дд.мм.гггг]

<hr>


# Prompt 3:
````
"""
Представь что ты senior разработчик php. Напиши код на php для решения задачи:
Имеется массив с историей timestamp статусов задачи и массив с историей timestamp изменения сотрудников в задаче.
Статусы имеют 5 стадий: backlog, analitycs, development, testing, done .
Сотрудники могут меняться в любое время независимо от статусов - на аналитике был один аналитик, потом передали другому аналитику.
Разработку вел один разработчик, либо сразу несколько.
Время наступления стадий и время смены сотрудников может быть разным.
Нужно написать такой код, который объединит эти два массива в один по времени, чтобы мы получили информацию, на какой стадии какие сотрудники работали: backlog: сотрудник 1, сотрудник 2. analitycs: сотрудник 1, сотрудник 2. testing: сотрудник 1, сотрудник 2. итд.

В выводе выдай только код на php с комментариями в коде там где это нужно. 
"""
````


## Ответ deepseek-r1-8b:
> Думает

Много рассуждал, выдал псевдо-код без решения.
[deepseek-r1-8b.txt](prompt3/deepseek-r1-8b.txt)

> total duration:       3m37.9114056s
load duration:        22.8567ms
prompt eval count:    255 token(s)
prompt eval duration: 166.8537ms
prompt eval rate:     1528.28 tokens/s
eval count:           5281 token(s)
eval duration:        3m37.7211696s
eval rate:            24.26 tokens/s

## Ответ yandex-gpt-5lite-8b:
[yandex5-arrays.php](prompt3/yandex5-arrays.php)
комментарий: код сложный, больше похож на бред. дополнять или менять сложно.
```
php prompt3/yandex5-arrays.php
Array
(
    [backlog] => сотрудник 1
    [analitycs] => сотрудник 2
    [development] => сотрудник 3
    [testing] => сотрудник 4
    [done] => сотрудник 4
)


total duration:       1m34.2376872s
load duration:        19.8433ms
prompt eval count:    208 token(s)
prompt eval duration: 923.1551ms
prompt eval rate:     225.31 tokens/s
eval count:           621 token(s)
eval duration:        1m33.2938145s
eval rate:            6.66 tokens/s
```

## Ответ gemma3:
[gemma3-arrays.php](prompt3/gemma3-arrays.php)
комментарий: наобъединял, сделал не то, что надо:
```
php prompt3/gemma3-arrays.php
Combined History Result:
Timestamp: 1678886400 - Status: backlog
Timestamp: 1678888200 - Employee: John Doe
Timestamp: 1678889400 - Employee: Jane Smith
Timestamp: 1678890000 - Status: analitycs
Timestamp: 1678892000 - Employee: Peter Jones
Timestamp: 1678893600 - Status: development
Timestamp: 1678897200 - Status: testing
Timestamp: 1678900800 - Status: done

total duration:       6m36.172768s
load duration:        57.2095ms
prompt eval count:    187 token(s)
prompt eval duration: 1.2074488s
prompt eval rate:     154.87 tokens/s
eval count:           1661 token(s)
eval duration:        6m34.9072532s
eval rate:            4.21 tokens/s
```

## Ответ Deepseek Online:
[deepseek-online.php](prompt3/deepseek-online.php)
комментарий: успешно справился с задачей.

> 55 sec

## Ответ yandex gpt5 pro online:
[yandex-gpt5-online.php](prompt3/yandex-gpt5-online.php)
комментарий: успешно справился с задачей.
> ~10sec

<hr>

# Prompt 4.1 Шуфутинский:
````
Скажи что ты видишь на картинке ./shuf.jpeg
````

## Ответ gemma3:

Added image './shuf.jpeg'
На изображении мужчина в белой шляпе и белой рубашке. У него борода и он смотрит прямо в камеру. Фон белый.

> total duration:       9.5736849s
load duration:        55.7436ms
prompt eval count:    278 token(s)
prompt eval duration: 3.3621123s
prompt eval rate:     82.69 tokens/s
eval count:           32 token(s)
eval duration:        6.1548115s
eval rate:            5.20 tokens/s

<hr>

# Prompt 4.2 Ollama Vision:
````
Скажи что ты видишь на картинке ./oll.png на русском языке
````

## Ответ gemma3:

На картинке я вижу следующее:

*   **Изображение:** Милое изображение кота в солнцезащитных очках и с ошейником, украшенным блестящими элементами. Изображение стилизовано под игрушечный кубик.
*   **Надпись "Ollama Vision"**: Заголовок над изображением.
*   **Текст**: Под заголовком написан текст: "Welcome to the era of open-source multimodal models" (Добро пожаловать в эпоху мультимодальных моделей с открытым исходным кодом).
*   **Нижний текст**: "Open-source models available now" (Модели с открытым исходным кодом доступны сейчас).

> total duration:       36.615047s
load duration:        59.9431ms
prompt eval count:    282 token(s)
prompt eval duration: 4.3459213s
prompt eval rate:     64.89 tokens/s
eval count:           155 token(s)
eval duration:        32.2039192s
eval rate:            4.81 tokens/s



<hr>

# Prompt 5:
```
"""
Ты лидер команды сопровождения в банке. Опиши алгоритм разбора инцидента:
При открытии счета клиенту возникает ошибка. Карточка клиента обновлена с ошибкой [Проверка досье клиента] Клиент " не прошел проверку уровня идентификации "Полная идентификация". Ошибка: У клиента должны быть заполнены страна и город регистрации или страна и город фактического пребывания. Повторите обновление или обратитесь в Service Desk

Данная ошибка возникает при не соответствии адресов с ФИАС. Адрес привели в порядок. При повторном открытии счета ошибка возникает вновь.

На предпроде ошибка с этим адресов возникает на разных карточках

Наряд в ЦФТ  провел след. работы - "Для клиента ФЛ в ЦФТ адрес перезаписан.", но ошибку это решение не устраняет.

Запрос SugarCRM к ЦФТ см. во вложении.

Просьба провести анализ проблемы.
"""
```

## Ответ deepseek-r1-8b:

> Думает

Хорошо, я лидер команды сопровождения в банке, и мне нужно разобраться с этой ошибкой, которая возникает при открытии счета клиенту. Ошибка связана с проверкой уровня идентификации клиента "Полная идентификация". Похоже, что проблема связана с адресами 
клиента.

Сначала я попробую понять, что происходит когда открывается счет. Карточка клиента обновляется и показывает ошибку: клиент не прошел проверку уровня идентификации. Далее говорится, что у клиента должны быть заполнены страна и город регистрации или страна и
город фактического пребывания. Если эти данные нет, возникается ошибка.

Пользователь также упоминает, что связь между адресами не соответствует данным ФИАС (Федерального информационного агентства по税овым и цифровым системам). Это может значить, что в системеstored ada地址ы клиента правильно обновлены, но при попытке открыть счет      
error persists.

Попробую представить, почему повторное открытие счета не устраняет ошибку. Может быть, адреса были неправильно обновлены или сохранены с ошибками. Или, возможно, есть проблемы с запросами SugarCRM к ЦФТ (Центральной финансовой таможенной службы).

Наряд в ЦФТ провел работы по перерезаписанию адреса для клиента ФЛ (физического лица), но это не помогло. Значит, возможно, проблема более глубокая и связана с тем, как данные обрабатываются после запроса.

Мне нужно рассмотреть несколько шагов:

1. Проверить, что данные о клиенте в системе соответствуют данным ФИАС. Если есть разные адреса, это может быть основной причиной ошибки.

2. Попробовать открыть счет с корректными адресами, чтобы убедиться, что ошибка действительно устранена.

3. Проверить, как обновляются данные клиента в систему после запроса SugarCRM. Может быть, есть ограничения или задержки.

4. Рассмотреть возможность работы с тестовыми данными, чтобы понять, насколько надежны обновления адресов.

5. Обсудить с командой поддержки Service Desk, возможно, есть дополнительные нюансы, которые я не考虑ал.

6. Если все это не помогает, возможно, нужно рассмотреть более значительные изменения в процессе opening счета или в взаимодействии с ЦФТ.

Мне также стоит обратить внимание на то, что ошибка возникает на разных карточках клиента, что может указывать на общую проблему с обновлением данных.

Возможно, стоит провести дополнительный анализ запросов SugarCRM к ЦФТ и убедиться, что данные передаются корректно. Также возможно, что в системе stored ada данные сохраняются неправильно, и мне нужно проверить, как обновляются адреса после получения ответа       
от ЦФТ.

Если всё это не помогает, может быть нужно рассмотреть более продвинутые методы анализа, такие как логирование или tracing, чтобы понять, где именно происходит сбой при обработке данных.
> Ответ

Для устранения ошибки при открытии счета клиента необходимо выполнить следующий алгоритм:

1. **Проверка соответствия адресов ФИАС:**
    - Получить данные клиента из системы.
    - Проверить, что地址ы (страна и город регистрации/фактического пребывания) совпадают с данными в ФИАС.
    - Если.address mismatch, обновить адреса до согласия с ФИАС.

2. **Обновление данных клиента:**
    - Обновить карточку клиента с корректными адресами.
    - Провести повторный запрос данных из ЦФТ для актуализации информации о клиенте.

3. **Тестирование открытия счета:**
    - Попробовать открывать счет заново, чтобы убедиться, что ошибка устранена.
    - Если ошибка сохраняется, перейти к следующему шагу.

4. **Анализ запросов SugarCRM:**
    - Проверить, как запрос данных из ЦФТ обрабатывается в системе.
    - Убедиться, что обновления адресов корректно erfolживают после получения ответа от ЦФТ.

5. **Работа с тестовыми данными:**
    - Создать тестовые данные клиента с разными адресами.
    - Проверить, как система обрабатывает такие данные и насколько надежны обновления.

6. **Совместные действия с Service Desk:**
    - Обсудить с коллегами из поддержки, чтобы избежать ограничений в системе.
    - Если требуется, предоставить дополнительную информацию для анализа проблемы.

7. **Обновление или修正 процесса opening счета:**
    - Рассмотреть возможность доработки алгоритма открытия счета для корректной обработки адресов.
    - Убедиться, что обновления клиентских данных erfolживают без ошибок после взаимодействия с ЦФТ.

8. **Дополнительные методы анализа:**
    - Провести анализ логирування для выявлення точки failure при обработці даних.
    - Использовать tools для tracking процессів opening счета і follow потоки даних.

9. **Вывод и дальнейшие действия:**
    - Если проблема устранена, оформить это в отчете.
    - Если не, определить дополнительні шляхи розв'язування проблеми та запланувати подальші дії.

Этот алгоритм поможет систематически разобраться с проблемой ошибки при открытии счета и обеспечить устранение её корректно.

> total duration:       51.7852313s
load duration:        23.4398ms
prompt eval count:    250 token(s)
prompt eval duration: 115.6361ms
prompt eval rate:     2161.95 tokens/s
eval count:           1329 token(s)
eval duration:        51.6455231s
eval rate:            25.73 tokens/s


## Ответ yandex-gpt-5lite-8b:
Алгоритм разбора инцидента может включать следующие шаги:

1. **Сбор информации:**
* Получить все детали об инциденте, включая номер ошибки, время и дату возникновения, а также любые дополнительные сведения, которые могут помочь в диагностике проблемы.
* Уточнить у клиента информацию о его адресе регистрации или фактического пребывания.

2. **Проверка данных:**
* Проверить правильность заполнения всех полей в карточке клиента, особенно адреса.
* Убедиться, что адрес соответствует формату ФИАС (Федеральной информационной адресной системе).

3. **Анализ предыдущих инцидентов:**
* Изучить историю обращений по данному клиенту и выяснить, возникали ли подобные ошибки ранее.
* Определить, были ли предприняты какие-либо действия для устранения проблемы в прошлом.

4. **Консультация с ЦФТ:**
* Обратиться к специалистам ЦФТ (Центра Финансовых Технологий) для получения дополнительной информации о проблеме.
* Уточнить, были ли внесены изменения в систему, которые могли повлиять на возникновение ошибки.

5. **Проверка запроса SugarCRM:**
* Изучить запрос SugarCRM, отправленный в ЦФТ, и убедиться, что все необходимые данные были предоставлены.
* Проверить наличие ответов или решений от ЦФТ по данному запросу.

6. **Тестирование системы:**
* Попробовать открыть счёт для другого клиента с аналогичным адресом, чтобы определить, является ли проблема специфичной для данного клиента или общей для всей системы.
* Проверить работу системы на разных этапах предпродажной подготовки (предпрод).

7. **Идентификация причины ошибки:**
* Определить, связана ли ошибка с неправильным форматом адреса, несоответствием данных в системе или другими факторами.
* Рассмотреть возможность технических проблем в системе.

8. **Разработка решения:**
* На основе анализа определить наиболее эффективное решение проблемы.
* Обсудить возможные варианты с коллегами и руководством.

9. **Реализация решения:**
* Внедрить выбранное решение в систему.
* Проверить, устранена ли ошибка после внесения изменений.

10. **Мониторинг и контроль:**
* После устранения ошибки продолжать мониторинг системы для предотвращения повторного возникновения проблемы.
* Регистрировать результаты и выводы по инциденту для дальнейшего анализа и улучшения процессов.

11. **Обратная связь клиенту:**
* Сообщить клиенту о решении проблемы и поблагодарить за обращение.
* Предоставить информацию о том, как избежать подобных ошибок в будущем.

> total duration:       1m11.9396636s
load duration:        20.3432ms
prompt eval count:    184 token(s)
prompt eval duration: 857.6658ms
prompt eval rate:     214.54 tokens/s
eval count:           489 token(s)
eval duration:        1m11.0611313s
eval rate:            6.88 tokens/s


## Ответ gemma3:
Хорошо, вот алгоритм разбора инцидента, составленный с учетом предоставленной информации. Он разделен на этапы, каждый с конкретными действиями и предполагаемыми результатами.  К алгоритму прилагаются дополнительные вопросы для выяснения больше информации.

**Алгоритм разбора инцидента "Ошибка при открытии счета: Не прошел проверку уровня идентификации"**

**Цель:** Выявить и устранить коренную причину ошибки, препятствующей открытию счета клиенту, и предотвратить повторение подобной проблемы в будущем.

**Этап 1: Сбор и систематизация информации (1-2 часа)**

*   **Действия:**
    *   **Детальный разбор сообщения об ошибке:**  Сообщение указывает на несоответствие адреса клиента требованиям ФИАС и отсутствие заполнения страны и города регистрации или фактического пребывания.
    *   **Изучение логов:**
        *   Изучить логи приложения при открытии счета, когда возникает ошибка.  Найти точные значения параметров (адрес, страна, город) в момент возникновения ошибки.
        *   Изучить логи взаимодействия с сервисом ФИАС.  Убедиться, что запрос к ФИАС формируется корректно и содержит необходимые параметры.
    *   **Анализ информации из SugarCRM:** Внимательно изучить приложенный запрос SugarCRM.  Проверить, какие данные о клиенте (адреса, ФИО, дата рождения и т.д.) передаются в систему при открытии счета и какие статусы проходят.
    *   **Воспроизведение ошибки:**  Попросить члена команды (не вовлеченного в предыдущие действия) попытаться воспроизвести ошибку на тестовой среде.
    *   **Сбор дополнительной информации (см. вопросы в конце)**
*   **Ожидаемый результат:**  Полное понимание контекста ошибки, выявление потенциальных областей для дальнейшего расследования.

**Этап 2: Анализ первоначальных действий и исключение простых причин (2-4 часа)**

*   **Действия:**
    *   **Проверка корректности внесённых исправлений:** Убедиться, что исправление адреса действительно соответствует требованиям ФИАС и что сотрудник правильно зафиксировал изменения.
    *   **Анализ решения ЦФТ:**  Выяснить, что подразумевалось под "адрес перезаписан" в ЦФТ.  Это изменение в какой базе данных, как именно было произведено и какие данные были перезаписаны?
    *   **Исключение временных проблем:**  Проверить, не связана ли ошибка с временными сбоями в работе сервиса ФИАС или приложения.
    *   **Проверка версии приложения:**  Убедиться, что на всех средах (производство, предпродакшн) установлена одинаковая версия приложения.  Иногда расхождения в версиях могут приводить к непредсказуемому поведению.
*   **Ожидаемый результат:**  Исключение или подтверждение влияния распространенных причин.

**Этап 3: Глубокий анализ (4-8 часов и более)**

*   **Действия:**
    *   **Анализ кода:**  Необходимо провести анализ кода приложения, отвечающего за проверку адреса клиента и взаимодействие с сервисом ФИАС.  Необходимо поискать:
        *   Некорректное формирование запросов к ФИАС.
        *   Неверное сопоставление данных, полученных от ФИАС, с данными клиента.
        *   Ошибки в логике проверки соответствия адреса.
        *   Необработанные исключения при взаимодействии с сервисом ФИАС.
    *   **Анализ данных в базах данных:**  Необходимо проверить, как данные клиента хранятся в базах данных и как они используются при открытии счета.  Иногда ошибка может быть связана с некорректными данными в базе данных.
    *   **Воспроизведение ошибки на разных клиентах:**  Проанализировать данные клиентов, у которых возникает ошибка.  Выявить общие черты (например, регион проживания, тип адреса).
    *   **Проверка влияния интеграций:** Проверить, не влияют ли другие системы и интеграции на процесс проверки адреса.

*   **Ожидаемый результат:**  Выявление корневой причины проблемы.

**Этап 4: Разработка и внедрение решения (зависит от сложности проблемы)**

*   **Действия:**
    *   Разработка и тестирование решения (исправление кода, изменение конфигурации, обновление данных).
    *   Внедрение решения на тестовую среду.
    *   Проведение регрессионного тестирования для убедиться, что решение не привело к другим проблемам.
    *   Внедрение решения на производственную среду.
    *   Мониторинг работы системы после внедрения решения.

**Этап 5: Предотвращение повторения (2 часа)**

*   **Действия:**
    *   Анализ причин возникновения проблемы и разработка мер по предотвращению повторения подобной ситуации в будущем.
    *   Обновление документации.
    *   Обучение сотрудников.

**Вопросы для выяснения дополнительной информации:**

*   **Конкретный регион/город проживания клиентов, у которых возникает ошибка:** Это может указать на проблемы с данными в конкретном регионе.
*   **Тип адресов, вызывающих ошибку (регистрация, фактическое пребывание, почтовый адрес):**  Разные типы адресов могут обрабатываться по-разному.
*   **Какие данные о клиенте передаются в сервис ФИАС при открытии счета?** (Включая полные ФИО, дата рождения, номер паспорта и т.д.)
*   **В каких именно полях базы данных хранятся данные адреса клиента?**
*   **Какая версия приложения используется в производственной среде, тестовой среде и предпродакшн среде?**
*   **Какая версия сервиса ФИАС используется?**
*   **Как часто возникает ошибка?** (Один раз в день, несколько раз в день, только в определенное время?)
*   **Были ли какие-либо изменения в сервисе ФИАС или в приложении перед тем, как ошибка начала возникать?**

**Важно:**

*   Приоритетом является решение проблемы для клиентов, у которых возникают ошибки.  Необходимо поддерживать связь с клиентами и информировать их о ходе решения проблемы.
*   Все действия должны быть задокументированы, включая результаты анализа, предпринятые действия и результаты тестирования.
*   Необходимо привлекать к решению проблемы специалистов из разных областей (разработчики, тестировщики, аналитики, специалисты ЦФТ).

Этот алгоритм является отправной точкой.  В зависимости от результатов анализа на каждом этапе, он может быть скорректирован.


> total duration:       6m9.2232358s
load duration:        119.4384ms
prompt eval count:    214 token(s)
prompt eval duration: 1.7332487s
prompt eval rate:     123.47 tokens/s
eval count:           1546 token(s)
eval duration:        6m7.369501s
eval rate:            4.21 tokens/s


## Ответ Yandex GPT 5 Online:
Алгоритм разбора инцидента:

1. **Сбор информации:**
* Уточнить у клиента, какие данные были введены при открытии счёта и какие адреса использовались.
* Проверить, были ли внесены изменения в карточку клиента после первоначального ввода данных.
* Получить доступ к логам системы и определить, на каком этапе возникает ошибка.
* Изучить описание проблемы, предоставленное ЦФТ, и результаты их работы по перезаписи адреса.

2. **Анализ данных:**
* Сравнить введённые клиентом адреса с данными в ФИАС и убедиться, что они соответствуют друг другу.
* Проверить, правильно ли были внесены изменения в карточку клиента после перезаписи адреса в ЦФТ.
* Проанализировать логи системы и определить, где происходит сбой при проверке уровня идентификации.
* Оценить, могут ли быть другие факторы, влияющие на возникновение ошибки (например, проблемы с интеграцией между системами).

3. **Проверка конфигурации системы:**
* Убедиться, что настройки системы соответствуют требованиям для проверки уровня идентификации.
* Проверить, нет ли конфликтов между различными модулями или настройками, которые могут вызывать ошибку.

4. **Тестирование:**
* Попробовать открыть счёт с использованием корректных данных адреса и проверить, исчезает ли ошибка.
* Если ошибка всё ещё возникает, провести тестирование на других карточках клиентов с аналогичными адресами.

5. **Взаимодействие с Service Desk и ЦФТ:**
* Сообщить о результатах анализа и тестирования в Service Desk.
* Обсудить с представителями ЦФТ возможные причины ошибки и предложить дополнительные шаги для её устранения.

6. **Разработка плана действий:**
* На основе анализа и тестирования разработать план действий по устранению ошибки.
* План может включать в себя корректировку данных в системе, изменение настроек или обращение к разработчикам для исправления проблемы на уровне кода.

7. **Реализация плана и мониторинг:**
* Реализовать разработанный план действий.
* После внесения изменений провести мониторинг операций по открытию счетов, чтобы убедиться, что ошибка больше не возникает.

8. **Документирование и отчётность:**
* Документировать все шаги, предпринятые для анализа и устранения ошибки.
* Подготовить отчёт о результатах расследования инцидента и мерах, принятых для его устранения.

> 10sec



## Ответ Deepseek Online:
### **Алгоритм разбора инцидента**

#### **1. Сбор информации и первичный анализ**
- **Описание инцидента**:
    - Ошибка при открытии счета: *"Клиент не прошел проверку уровня идентификации «Полная идентификация»"*.
    - Условие ошибки: *"У клиента должны быть заполнены страна и город регистрации или страна и город фактического пребывания"*.
    - Адрес приведен в порядок, но ошибка повторяется.
    - На **pre-prod** ошибка воспроизводится на разных карточках.
    - Наряд в **ЦФТ**: адрес перезаписан, но ошибка не устранена.

- **Проверка логов и данных**:
    - Запрос в **SugarCRM** к **ЦФТ** (анализ ответа).
    - Проверка журналов ошибок в момент открытия счета.
    - Сравнение структуры запроса/ответа между **prod** и **pre-prod**.

#### **2. Воспроизведение проблемы**
- Попытаться воспроизвести ошибку на **test/pre-prod** с аналогичными данными.
- Проверить, корректно ли передаются **страна и город** в запросе к **ЦФТ**.
- Убедиться, что после "исправления" адреса в **ФИАС** изменения действительно применяются.

#### **3. Анализ возможных причин**
- **Неверный формат адреса в запросе**:
    - Проверить маппинг полей (страна/город) между **SugarCRM** и **ЦФТ**.
    - Возможно, передаются не те поля или в некорректном формате.
- **Кэширование данных в ЦФТ**:
    - Убедиться, что после обновления адреса в **ФИАС** изменения сразу применяются.
    - Проверить, не кэшируются ли старые данные в **ЦФТ**.
- **Ошибка в бизнес-логике проверки**:
    - Проверить правила валидации уровня идентификации (может быть жесткая привязка только к **регистрации**, игнорируя **фактическое пребывание**).
- **Проблема интеграции SugarCRM ↔ ЦФТ**:
    - Сравнить запросы/ответы с рабочей и нерабочей карточками.
    - Возможно, в **SugarCRM** не все обязательные поля заполняются.

#### **4. Проверка гипотез и устранение**
- **Если проблема в формате/маппинге**:
    - Скорректировать передаваемые данные или доработать интеграцию.
- **Если проблема в кэшировании**:
    - Очистить кэш **ЦФТ** или запросить принудительное обновление.
- **Если ошибка в бизнес-правилах**:
    - Уточнить требования к **"Полной идентификации"** и доработать проверку.

#### **5. Тестирование и мониторинг**
- После внесения изменений:
    - Провести тест на **test/pre-prod**.
    - Убедиться, что ошибка больше не возникает.
    - Запустить мониторинг на **prod** после выкатки.

#### **6. Документирование решения**
- Зафиксировать root cause и решение в базе знаний.
- При необходимости обновить инструкции для **Service Desk**.

**Рекомендация**:  
Если проблема сохраняется, запросить у **ЦФТ** детальные логи обработки запроса и провести совместный разбор.

> 45 sec